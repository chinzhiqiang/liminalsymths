<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>liminalsynths</title>

<style>
  @font-face{
    font-family: "NeueMetanaNext-SemiBold";
    src: url("fonts/NeueMetanaNext-SemiBold.otf") format("opentype");
    font-weight: 600;
    font-style: normal;
  }

  html, body {
    margin: 0;
    height: 100%;
    background: #fff;
    font-family: "NeueMetanaNext-SemiBold", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
  }

  /* 全站隱藏原生游標 */
  body { cursor: none; }

  /* 黑色點點游標 */
  .cursor {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: #000;
    position: fixed;
    left: 0;
    top: 0;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 9999;
  }

  /* 共用置中容器 */
  .center {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* landing */
  #landing img{
    width: min(520px, 70vw);
    height: auto;
    user-select: none;
    -webkit-user-drag: none;
  }

  /* menu */
  #menu { display: none; }

  .menu-wrap{
    position: relative;
    width: min(980px, 88vw);
    max-height: 82vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #menuSvg{
    width: 100%;
    height: auto;
    display: block;
    user-select: none;
    -webkit-user-drag: none;
  }

  /* 熱區覆蓋層 */
  .menu-hotspots{
    position: absolute;
    inset: 0;
    z-index: 10;
    pointer-events: auto;
  }

  .hotspot{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 88%;
    cursor: none;
  }

  /* 你要的「上下有一咪咪重疊」 */
  .hs-about        { top:  6.5%; height: 15.0%; }
  .hs-contact      { top: 19.2%; height: 15.0%; }
  .hs-poster       { top: 31.9%; height: 15.0%; }
  .hs-typographic  { top: 44.6%; height: 15.0%; }
  .hs-illustration { top: 57.3%; height: 15.0%; }
  .hs-project      { top: 70.0%; height: 17.0%; }

  img { image-rendering: auto; }
</style>
</head>

<body>
<div class="cursor" id="cursor"></div>

<!-- Landing -->
<section id="landing" class="center">
  <img id="enterBtn" alt="liminalsynths"/>
</section>

<!-- Menu -->
<section id="menu" class="center">
  <div class="menu-wrap">
    <img id="menuSvg" alt="menu"/>

    <div class="menu-hotspots" aria-hidden="true">
      <div class="hotspot hs-about"        data-key="about"></div>
      <div class="hotspot hs-contact"      data-key="contact"></div>
      <div class="hotspot hs-poster"       data-key="poster"></div>
      <div class="hotspot hs-typographic"  data-key="typographic"></div>
      <div class="hotspot hs-illustration" data-key="illustration"></div>
      <div class="hotspot hs-project"      data-key="project"></div>
    </div>
  </div>
</section>

<script>
/* =========================
   游標：黑色點點
========================= */
const cursor = document.getElementById("cursor");
window.addEventListener("mousemove", (e) => {
  cursor.style.left = e.clientX + "px";
  cursor.style.top  = e.clientY + "px";
});

/* =========================
   資產自動探測（避免路徑不一致）
   會依序試：SVG/、svg/、assets/、根目錄
========================= */
const ASSET_BASES = ["SVG/", "svg/", "assets/", "Assets/", ""];
const ASSET_FILES = {
  landing: ["資產 7.svg", "asset7.svg", "Asset 7.svg"],
  original: ["original.svg", "Original.svg"],
  about: ["about.svg", "About.svg"],
  contact: ["contact.svg", "Contact.svg"],
  poster: ["poster.svg", "Poster.svg"],
  typographic: ["typographic.svg", "Typographic.svg"],
  illustration: ["illustration.svg", "Illustration.svg"],
  project: ["project.svg", "Project.svg"]
};

function tryLoad(url){
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(url);
    img.onerror = () => resolve(null);
    img.src = url + (url.includes("?") ? "" : `?v=${Date.now()}`); // 防快取
  });
}

async function resolveAsset(key){
  const names = ASSET_FILES[key] || [];
  for (const base of ASSET_BASES){
    for (const name of names){
      const url = base + name;
      const ok = await tryLoad(url);
      if (ok) return ok;
    }
  }
  return null;
}

/* =========================
   子頁路徑自動探測（避免 404）
   會先 fetch 檢查存在再跳轉
========================= */
const PAGE_CANDIDATES = {
  about: [
    "about.html", "About.html",
    "about/index.html", "About/index.html",
    "pages/about.html", "Pages/about.html"
  ],
  contact: [
    "contact.html", "Contact.html",
    "contact/index.html", "Contact/index.html",
    "pages/contact.html", "Pages/contact.html"
  ],
  poster: [
    "poster.html", "Poster.html",
    "poster/index.html", "Poster/index.html",
    "pages/poster.html", "Pages/poster.html"
  ],
  typographic: [
    "typographic.html", "Typographic.html",
    "typographic/index.html", "Typographic/index.html",
    "pages/typographic.html", "Pages/typographic.html"
  ],
  illustration: [
    "illustration.html", "Illustration.html",
    "illustration/index.html", "Illustration/index.html",
    "pages/illustration.html", "Pages/illustration.html"
  ],
  project: [
    "project.html", "Project.html",
    "project/index.html", "Project/index.html",
    "pages/project.html", "Pages/project.html"
  ]
};

async function exists(path){
  try{
    const res = await fetch(path, { cache: "no-store" });
    return res.ok;
  }catch(e){
    return false;
  }
}

async function goToPage(key){
  const list = PAGE_CANDIDATES[key] || [];
  for (const p of list){
    if (await exists(p)){
      location.href = p;
      return;
    }
  }
  alert(`找不到「${key}」頁面檔案。\n請確認 repo 是否存在：\n- ${list.join("\n- ")}`);
}

/* =========================
   Landing -> Menu
========================= */
const landing = document.getElementById("landing");
const menu = document.getElementById("menu");
const enterBtn = document.getElementById("enterBtn");
const menuSvg = document.getElementById("menuSvg");

function showMenu(){
  landing.style.display = "none";
  menu.style.display = "flex";
}

enterBtn.addEventListener("click", showMenu);

/* =========================
   初始化：把 logo / menu svg 都補上（自動抓對路徑）
========================= */
let URLS = {}; // 存 resolved url

(async function init(){
  // landing logo
  URLS.landing = await resolveAsset("landing");
  if (!URLS.landing){
    // 若真的找不到，至少讓你知道是哪裡缺
    enterBtn.alt = "Missing: 資產 7.svg";
  } else {
    enterBtn.src = URLS.landing;
  }

  // menu svgs
  const keys = ["original","about","contact","poster","typographic","illustration","project"];
  for (const k of keys){
    URLS[k] = await resolveAsset(k);
  }

  // menu default
  if (URLS.original){
    menuSvg.src = URLS.original;
  } else {
    menuSvg.alt = "Missing: original.svg";
  }

  // 預載已解析到的 svg，避免 hover 閃
  Object.values(URLS).filter(Boolean).forEach(u => {
    const img = new Image();
    img.src = u;
  });
})();

/* =========================
   Menu hover 切換 + click 跳頁
========================= */
document.querySelectorAll(".hotspot").forEach(h => {
  const key = h.dataset.key;

  h.addEventListener("mouseenter", () => {
    if (URLS[key]) menuSvg.src = URLS[key];
  });

  h.addEventListener("mouseleave", () => {
    if (URLS.original) menuSvg.src = URLS.original;
  });

  h.addEventListener("click", () => {
    goToPage(key);
  });
});

/* 允許你用 #menu 直接進 menu（方便測試） */
if (location.hash === "#menu") showMenu();

</script>
</body>
</html>
